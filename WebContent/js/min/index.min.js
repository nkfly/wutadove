function slideChange(){slide.isChanging=!0,$("#slide-"+slide.index).fadeOut(2e3),$("#slide-tab-"+slide.index).animate({},1e3,function(){$(this).removeClass("slide-here")}),slide.index++,slide.index>slide.numberOfItem&&(slide.index=1),$("#slide-"+slide.index).fadeIn(2e3,function(){slide.isChanging=!1}),$("#slide-tab-"+slide.index).animate({},1e3,function(){$(this).addClass("slide-here")})}function moveToSlide(){slide.isChanging||(slide.isChanging=!0,clearTimeout(slide.handler),$("#slide-"+slide.index).fadeOut(1e3),$("#slide-tab-"+slide.index).animate({},1e3,function(){$(this).removeClass("slide-here")}),slide.index=$(this).index()+1,$("#slide-"+slide.index).fadeIn(1e3),$("#slide-tab-"+slide.index).animate({},1e3,function(){$(this).addClass("slide-here"),slide.isChanging=!1}),slide.handler=setInterval(slideChange,6e3))}function getDisplayBlock(i){return $('<article id="block-'+i+'" class="display-block"><div class="display-picture"><a href=""><img src="/img/404-anime-girl.jpg" class="display-img"></a><span class="display-time">0:00</span></div><div class="display-title"><a href="">這部影片不存在</a></div><div class="display-meta display-author"></div><div class="display-meta display-like"></div></article>')}function getDisplayRow(i){for(var e=$("<section class='display-row'></section>"),a=i;i+3>a;a++)e.append(getDisplayBlock(a).hide());return e}function setDisplayBlock(i,e){$.ajax({type:"GET",url:"/index/video",data:{offset:""+i,count:""+e},dataType:"json",success:function(i){for(var e=0;e<i.inDatabase.length;e++){var a=$("#block-"+(e+loading.index)).addClass("block-"+i.inDatabase[e]);a.find("div.display-picture>a").attr("href","/learn/"+i.inDatabase[e]+"/"+i.index[e]),a.find("div.display-title>a").attr("href","/learn/"+i.inDatabase[e]+"/"+i.index[e]),a.find("div.display-author").html(i.author[e]+" 編"),a.find("div.display-like").text(i.view[e]+" 次觀看"),a.find("img").attr("src","http://i.ytimg.com/vi/"+i.inDatabase[e]+"/hqdefault.jpg"),a.find("span.display-time").text(i.duration[e]),a.find("div.display-title a").text(i.title[e]),a.fadeIn()}"end"==i.statusResponse&&(loading.status="end",$("#loading").hide()),loading.index+=i.inDatabase.length,loading.isProcessing=!1},error:function(i){console.log(i)}})}function setPopover(i){i.popover({html:!0,content:function(){return'<i style="color:gold" class="fa fa-certificate"></i> '+$(this).attr("data-badge-count")},placement:function(){return"top"},trigger:"hover",template:'<div class="popover" role="tooltip"><div class="arrow"></div><div class="popover-title" ></div></div>'}).on("shown.bs.popover",function(){$(this).next().find(".popover-title").textillate({"in":{effect:$(this).attr("data-badge-effect")}})}).on("hide.bs.popover",function(){$(".popover").remove(),setPopover($(this))})}$(document).ready(function(){setPopover($(".badge")),loading.index=$("article").length,$(window).add("#container").scroll(function(){loading.isProcessing||$(window).scrollTop()+$(window).height()<=$("#loading").offset().top&&$("#container").scrollTop()+$("#container").height()<=$("#loading").offset().top||(loading.isProcessing=!0,"end"!=loading.status&&($("#container").append(getDisplayRow(loading.index)),setDisplayBlock(loading.index,3)))})});